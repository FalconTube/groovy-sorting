<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="./favicon.png" />
	<meta name="viewport" content="width=device-width" />
	<meta http-equiv="content-security-policy" content="">
		<link href="./_app/immutable/assets/_layout-7b3a7ee3.css" rel="stylesheet">
		<link href="./_app/immutable/assets/_page-1d87eb11.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/start-ca72d9d6.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index-67050652.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/singletons-b3cf494c.js">
		<link rel="modulepreload" href="./_app/immutable/components/pages/_layout.svelte-03d65cb8.js">
		<link rel="modulepreload" href="./_app/immutable/modules/pages/_layout.js-9cbb603b.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/_layout-da46b06b.js">
		<link rel="modulepreload" href="./_app/immutable/components/pages/_page.svelte-c6b38aa3.js">
</head>

<body data-sveltekit-preload-data="hover">
	<div style="display: contents">


<head><link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css">
	<script defer src="https://pyscript.net/latest/pyscript.js"></script>
	<py-config>packages=[&#39;regex&#39;,] </py-config></head>

<html lang="en-us" class="svelte-yglz26"><h1 class="title svelte-yglz26">Groovy sorting</h1>

<div class="outer svelte-yglz26"><label for="infile" class="svelte-yglz26">Groovy source input:</label>
	<pre id="infile" contenteditable></pre>
	
	<div class="column svelte-yglz26"><div class="row svelte-yglz26"><button id="button" class="svelte-yglz26">Sort</button>	
		<button class="svelte-yglz26">Copy to Clipboard</button></div></div>
	
	
	<label for="code" class="svelte-yglz26">Sorted Groovy file:</label>
	<pre id="mycode" contenteditable><!-- HTML_TAG_START --><!-- HTML_TAG_END --></pre></div>		

<py-script>from pyodide.ffi import create_proxy
import regex
from js import document

def sortkey():
    &quot;&quot;&quot;Return the basename of function.&quot;&quot;&quot;
    return lambda n: n.split(&quot;(&quot;)[0].split(&quot; &quot;)[-1]			
				
def hello_args(self):
	finalreg = r&quot;[a-zA-Z]+\s[A-Za-z0-9]+\([^)]*\)\s*\{((?:[^{}]|\{(?1)*\})*)\}&quot;
	
	text = document.getElementById(&quot;infile&quot;).innerHTML
	matches = regex.finditer(finalreg, text)

	# Get all matches as strings in list
	out = []
	for match in matches:
		outstring = &quot;&quot;.join(match.group())
		out.append(outstring)

	# Sort by function name before first bracket
	outsort = sorted(out, key=sortkey())

	# Remove all found functions from text and strip trailing whitespace
	for i in outsort:
		text = text.replace(i, &quot;&quot;)
	

	# Now add them in sorted order
	for i in outsort:
		text += f&#39;\n{ i }\n&#39;
	text = text.strip()
	#document.getElementById(&quot;outmsg&quot;).value = text
	document.getElementById(&quot;mycode&quot;).innerHTML = text

Element(&#39;button&#39;).element.addEventListener(&quot;click&quot;, create_proxy(hello_args))
</py-script>

</html>


		<script type="module" data-sveltekit-hydrate="dt9msc">
			import { start } from "./_app/immutable/start-ca72d9d6.js";

			start({
				env: {},
				paths: {"base":"","assets":""},
				target: document.querySelector('[data-sveltekit-hydrate="dt9msc"]').parentNode,
				version: "1672497802565",
				hydrate: {
					node_ids: [0, 2],
					data: [null,null],
					form: null
				}
			});
		</script>
	</div>
</body>

</html>